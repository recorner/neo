<!DOCTYPE html>
<html>
<head>
    <title>Registration Test</title>
</head>
<body>
    <h1>Testing Registration Form</h1>
    <div id="status">Testing...</div>
    
    <script>
        async function testRegistration() {
            const statusEl = document.getElementById('status');
            
            try {
                statusEl.innerHTML = 'Opening registration page...';
                
                // Test the registration form by submitting data
                const formData = new FormData();
                formData.append('username', 'testuser' + Date.now());
                formData.append('password', 'TestPass123!');
                formData.append('confirmPassword', 'TestPass123!');
                formData.append('telegramUsername', 'testuser');
                
                statusEl.innerHTML = 'Submitting registration...';
                
                const response = await fetch('http://localhost:5173/auth/register?/register', {
                    method: 'POST',
                    body: formData
                });
                
                statusEl.innerHTML = `Response status: ${response.status}`;
                
                if (response.status === 302) {
                    const location = response.headers.get('location');
                    statusEl.innerHTML = `✅ Registration successful! Redirecting to: ${location}`;
                    
                    // Check if user was created
                    setTimeout(() => {
                        statusEl.innerHTML += '<br><br>✅ Registration is working properly!<br>The form validation issue is just on the frontend.';
                    }, 1000);
                } else {
                    const text = await response.text();
                    statusEl.innerHTML = `❌ Registration failed: ${text}`;
                }
                
            } catch (error) {
                statusEl.innerHTML = `❌ Error: ${error.message}`;
            }
        }
        
        // Run test immediately
        testRegistration();
    </script>
</body>
</html>
